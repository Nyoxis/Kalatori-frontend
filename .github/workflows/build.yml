name: Build opencart3 and prestashop modules
on: workflow_dispatch
jobs:
  build-prestashop-addon:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./prestashop_release
    steps:
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.3'
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Get filename
        run: echo "ZIP=ps_dotpayment_$(date +'%Y-%m-%d')_$(git rev-parse --short "$GITHUB_SHA").zip" >> $GITHUB_ENV
      - name: Run make_zip script file
        run: ./make_zip.php $ZIP
      - name: check if there is files
        run: ls -c ps_dotpayment*.zip | head -1

